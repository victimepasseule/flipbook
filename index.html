<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Flipbook</title>

  <style>
   html, body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:transparent;
}

/* conteneur qui correspond exactement à l’iframe Wix */
#stage{
  position:relative;
  width:100%;
  height:100%;
}

/* livre centré RÉELLEMENT */
#book{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:980px!important;
  height:490px!important;
}
	  
	  @media (max-width: 768px){

 #book{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:320px!important;
  height:160px!important;
}

}

/* neutralise toutes les ombres internes éventuelles */
.stf__page,
.stf__item,
.stf__item::before,
.stf__item::after{
  box-shadow: none !important;
  filter: none !important;
}
  </style>

  <script src="https://cdn.jsdelivr.net/npm/page-flip/dist/js/page-flip.browser.min.js"></script>
</head>

<body>

	
<div id="stage">
  <div id="book"></div>
</div>
	

<script>

const pages = [
"https://static.wixstatic.com/media/1fcbd1_ce09f28255dd43d49e327a9212bf8d3f~mv2.jpg",
"https://static.wixstatic.com/media/1fcbd1_ca7721fcffdf4f60aad0610f51108b8e~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_5f89cc6c830347dcaa122da93d93b710~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_f10c53580c2840de9a73cc7019425888~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_be36456674ea4045ab62f6ad8503fe54~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_1f9945a1e71a4fa5882daf421b0f04af~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_17ba6b50c18a438d99dae68cc8a4f339~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_1d6482961a644c2d9f80079694d7d9f5~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_0dd6feba13bd4bea8d296f89a6df7f34~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_9997dcf9d6bc49c49b750fc8e8176e90~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_8bfa913c2e6e4716aac303b30b87a002~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_704af27fed10495783cc23f6a40459e0~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_d2d2d717034b4723b91b7ae3a849343d~mv2.png",
"https://static.wixstatic.com/media/1fcbd1_5b423e4637d148c2a61e143386c7663a~mv2.jpg",
	
];

const bookEl = document.getElementById("book");

let pageFlip = null; // ⭐ GLOBAL

const pageNodes = pages.map(src=>{
  const d=document.createElement("div");
  d.innerHTML=`<img src="${src}" style="width:100%;height:100%;object-fit:contain;">`;
  return d;
});

function initFlipbook(){

  pageFlip = new St.PageFlip(bookEl,{
    width:500,
    height:500,
    size:"stretch",
    //minWidth:1000,
    maxWidth:1000,
    //minHeight:500,
    maxHeight:500,
    showCover:false,
    usePortrait:false,
    autoSize:true,
    drawShadow:false,
    maxShadowOpacity:0,
    renderingMode:"html"
  });

  pageFlip.loadFromHTML(pageNodes);

  /* exemple event pour tester */
  pageFlip.on("flip", e=>{
    console.log("page", e.data);
  });

}

/* attendre que wix + iframe aient leur taille finale */
window.addEventListener("load",()=>{
  setTimeout(initFlipbook,80);
});

	
	
</script>

</body>
</html>
